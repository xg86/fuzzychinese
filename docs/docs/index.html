<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta name="generator" content="Hugo 0.81.0" />
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="fuzzychinese #  形近词中文模糊匹配
A simple tool to fuzzy match chinese words, particular useful for proper name matching and address matching.
一个可以模糊匹配形近字词的小工具。对于专有名词，地址的匹配尤其有用。
安装说明 #  pip install fuzzychinese 使用说明 #  首先使用想要匹配的字典对模型进行训练。
然后用FuzzyChineseMatch.transform(raw_words, n) 来快速查找与raw_words的词最相近的前n个词。
训练模型时有三种分析方式可以选择，笔划分析(stroke)，部首分析(radical)，和单字分析(char)。也可以通过调整ngram_range的值来提高模型性能。
匹配完成后返回相似度分数，匹配的相近词语及其原有索引号。
import pandas as pd from fuzzychinese import FuzzyChineseMatch test_dict = pd.Series([&#39;长白朝鲜族自治县&#39;,&#39;长阳土家族自治县&#39;,&#39;城步苗族自治县&#39;,&#39;达尔罕茂明安联合旗&#39;,&#39;汨罗市&#39;]) raw_word = pd.Series([&#39;达茂联合旗&#39;,&#39;长阳县&#39;,&#39;汩罗市&#39;]) assert(&#39;汩罗市&#39;!=&#39;汨罗市&#39;) # They are not the same! fcm = FuzzyChineseMatch(ngram_range=(3, 3), analyzer=&#39;stroke&#39;) fcm.fit(test_dict) top2_similar = fcm.transform(raw_word, n=2) res = pd.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="Home" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/docs/" />

<title>Home | Fuzzychinese</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.2bc2364a4a4b31f0ec1debecf0a8f90a840821f143dfe1ac6a0f7cbcbdcf64ac.css" integrity="sha256-K8I2SkpLMfDsHevs8Kj5CoQIIfFD3&#43;Gsag98vL3PZKw=">
<script defer src="/en.search.min.f7e1c191b2aa9d16d17b5986196284dde841fc406d58ef137993a8808ed9d2d8.js" integrity="sha256-9&#43;HBkbKqnRbRe1mGGWKE3ehB/EBtWO8TeZOogI7Z0tg="></script>
<link rel="alternate" type="application/rss+xml" href="/docs/index.xml" title="Fuzzychinese" />
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a href="/"><span>Fuzzychinese</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  



  
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/api-documentation/" class="">API Documentation</a>
  

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var a=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Home</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#安装说明">安装说明</a></li>
    <li><a href="#使用说明">使用说明</a></li>
    <li><a href="#其他功能">其他功能</a></li>
    <li><a href="#致谢">致谢</a></li>
    <li><a href="#installation">Installation</a></li>
    <li><a href="#quickstart">Quickstart</a></li>
    <li><a href="#other-use">Other use</a></li>
    <li><a href="#credits">Credits</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="fuzzychinese">
  fuzzychinese
  <a class="anchor" href="#fuzzychinese">#</a>
</h1>
<p>形近词中文模糊匹配</p>
<p>A simple tool to fuzzy match chinese words, particular useful for proper name matching and address matching.</p>
<p>一个可以模糊匹配形近字词的小工具。对于专有名词，地址的匹配尤其有用。</p>
<h2 id="安装说明">
  安装说明
  <a class="anchor" href="#%e5%ae%89%e8%a3%85%e8%af%b4%e6%98%8e">#</a>
</h2>
<pre><code>pip install fuzzychinese
</code></pre><h2 id="使用说明">
  使用说明
  <a class="anchor" href="#%e4%bd%bf%e7%94%a8%e8%af%b4%e6%98%8e">#</a>
</h2>
<p>首先使用想要匹配的字典对模型进行训练。</p>
<p>然后用<code>FuzzyChineseMatch.transform(raw_words, n)</code> 来快速查找与<code>raw_words</code>的词最相近的前n个词。</p>
<p>训练模型时有三种分析方式可以选择，笔划分析(<code>stroke</code>)，部首分析(<code>radical</code>)，和单字分析(<code>char</code>)。也可以通过调整<code>ngram_range</code>的值来提高模型性能。</p>
<p>匹配完成后返回相似度分数，匹配的相近词语及其原有索引号。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">    <span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
    <span style="color:#f92672">from</span> fuzzychinese <span style="color:#f92672">import</span> FuzzyChineseMatch
    test_dict <span style="color:#f92672">=</span>  pd<span style="color:#f92672">.</span>Series([<span style="color:#e6db74">&#39;长白朝鲜族自治县&#39;</span>,<span style="color:#e6db74">&#39;长阳土家族自治县&#39;</span>,<span style="color:#e6db74">&#39;城步苗族自治县&#39;</span>,<span style="color:#e6db74">&#39;达尔罕茂明安联合旗&#39;</span>,<span style="color:#e6db74">&#39;汨罗市&#39;</span>])
    raw_word <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>Series([<span style="color:#e6db74">&#39;达茂联合旗&#39;</span>,<span style="color:#e6db74">&#39;长阳县&#39;</span>,<span style="color:#e6db74">&#39;汩罗市&#39;</span>])
    <span style="color:#66d9ef">assert</span>(<span style="color:#e6db74">&#39;汩罗市&#39;</span><span style="color:#f92672">!=</span><span style="color:#e6db74">&#39;汨罗市&#39;</span>) <span style="color:#75715e"># They are not the same!</span>

    fcm <span style="color:#f92672">=</span> FuzzyChineseMatch(ngram_range<span style="color:#f92672">=</span>(<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">3</span>), analyzer<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;stroke&#39;</span>)
    fcm<span style="color:#f92672">.</span>fit(test_dict)
    top2_similar <span style="color:#f92672">=</span> fcm<span style="color:#f92672">.</span>transform(raw_word, n<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>)
    res <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>concat([
        raw_word,
        pd<span style="color:#f92672">.</span>DataFrame(top2_similar, columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;top1&#39;</span>, <span style="color:#e6db74">&#39;top2&#39;</span>]),
        pd<span style="color:#f92672">.</span>DataFrame(
            fcm<span style="color:#f92672">.</span>get_similarity_score(),
            columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;top1_score&#39;</span>, <span style="color:#e6db74">&#39;top2_score&#39;</span>]),
        pd<span style="color:#f92672">.</span>DataFrame(
            fcm<span style="color:#f92672">.</span>get_index(),
            columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;top1_index&#39;</span>, <span style="color:#e6db74">&#39;top2_index&#39;</span>])],
                    axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</code></pre></div><table>
<thead>
<tr>
<th></th>
<th>top1</th>
<th>top2</th>
<th>top1_score</th>
<th>top2_score</th>
<th>top1_index</th>
<th>top2_index</th>
</tr>
</thead>
<tbody>
<tr>
<td>达茂联合旗</td>
<td>达尔罕茂明安联合旗</td>
<td>长白朝鲜族自治县</td>
<td>0.824751</td>
<td>0.287237</td>
<td>3</td>
<td>0</td>
</tr>
<tr>
<td>长阳县</td>
<td>长阳土家族自治县</td>
<td>长白朝鲜族自治县</td>
<td>0.610285</td>
<td>0.475000</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>汩罗市</td>
<td>汨罗市</td>
<td>长白朝鲜族自治县</td>
<td>1.000000</td>
<td>0.152093</td>
<td>4</td>
<td>0</td>
</tr>
</tbody>
</table>
<h2 id="其他功能">
  其他功能
  <a class="anchor" href="#%e5%85%b6%e4%bb%96%e5%8a%9f%e8%83%bd">#</a>
</h2>
<ul>
<li>
<p>直接使用<code>Stroke</code>, <code>Radical</code>进行汉字分解。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">stroke <span style="color:#f92672">=</span> Stroke()
radical <span style="color:#f92672">=</span> Radical()
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;像&#34;</span>, stroke<span style="color:#f92672">.</span>get_stroke(<span style="color:#e6db74">&#34;像&#34;</span>))
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;像&#34;</span>, radical<span style="color:#f92672">.</span>get_radical(<span style="color:#e6db74">&#34;像&#34;</span>))
</code></pre></div><pre><code>像 ㇒〡㇒㇇〡㇕一㇒㇁㇒㇒㇒㇏
像 人象
</code></pre></li>
<li>
<p>使用<code>FuzzyChineseMatch.compare_two_columns(X, Y)</code>对每一行的两个词进行比较，获得相似度分数。</p>
</li>
<li>
<p>详情请参见<a href="http://znwang.me/fuzzychinese/">说明文档</a>.</p>
</li>
</ul>
<h2 id="致谢">
  致谢
  <a class="anchor" href="#%e8%87%b4%e8%b0%a2">#</a>
</h2>
<p>拆字数据来自于 <a href="https://github.com/kfcd/chaizi">漢語拆字字典</a> by <a href="http://kaifangcidian.com/">開放詞典網</a>。</p>
<h2 id="installation">
  Installation
  <a class="anchor" href="#installation">#</a>
</h2>
<pre><code>pip install fuzzychinese
</code></pre><h2 id="quickstart">
  Quickstart
  <a class="anchor" href="#quickstart">#</a>
</h2>
<p>First train a model with the target list of words you want to match to.</p>
<p>Then use <code>FuzzyChineseMatch.transform(raw_words, n)</code> to find top n most similar words in the target for your <code>raw_words</code> .</p>
<p>There are three analyzers to choose from when training a model: <code>stroke</code>, <code>radical</code>, and <code>char</code>. You can also change <code>ngram_range</code> to fine-tune the model.</p>
<p>After the matching, similarity score, matched words and its corresponding index are returned.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">    <span style="color:#f92672">from</span> fuzzychinese <span style="color:#f92672">import</span> FuzzyChineseMatch
    test_dict <span style="color:#f92672">=</span>  pd<span style="color:#f92672">.</span>Series([<span style="color:#e6db74">&#39;长白朝鲜族自治县&#39;</span>,<span style="color:#e6db74">&#39;长阳土家族自治县&#39;</span>,<span style="color:#e6db74">&#39;城步苗族自治县&#39;</span>,<span style="color:#e6db74">&#39;达尔罕茂明安联合旗&#39;</span>,<span style="color:#e6db74">&#39;汨罗市&#39;</span>])
    raw_word <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>Series([<span style="color:#e6db74">&#39;达茂联合旗&#39;</span>,<span style="color:#e6db74">&#39;长阳县&#39;</span>,<span style="color:#e6db74">&#39;汩罗市&#39;</span>])
    <span style="color:#66d9ef">assert</span>(<span style="color:#e6db74">&#39;汩罗市&#39;</span><span style="color:#f92672">!=</span><span style="color:#e6db74">&#39;汨罗市&#39;</span>) <span style="color:#75715e"># They are not the same!</span>

    fcm <span style="color:#f92672">=</span> FuzzyChineseMatch(ngram_range<span style="color:#f92672">=</span>(<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">3</span>), analyzer<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;stroke&#39;</span>)
    fcm<span style="color:#f92672">.</span>fit(test_dict)
    top2_similar <span style="color:#f92672">=</span> fcm<span style="color:#f92672">.</span>transform(raw_word, n<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>)
    res <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>concat([
        raw_word,
        pd<span style="color:#f92672">.</span>DataFrame(top2_similar, columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;top1&#39;</span>, <span style="color:#e6db74">&#39;top2&#39;</span>]),
        pd<span style="color:#f92672">.</span>DataFrame(
            fcm<span style="color:#f92672">.</span>get_similarity_score(),
            columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;top1_score&#39;</span>, <span style="color:#e6db74">&#39;top2_score&#39;</span>]),
        pd<span style="color:#f92672">.</span>DataFrame(
            fcm<span style="color:#f92672">.</span>get_index(),
            columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;top1_index&#39;</span>, <span style="color:#e6db74">&#39;top2_index&#39;</span>])],
                    axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</code></pre></div><table>
<thead>
<tr>
<th></th>
<th>top1</th>
<th>top2</th>
<th>top1_score</th>
<th>top2_score</th>
<th>top1_index</th>
<th>top2_index</th>
</tr>
</thead>
<tbody>
<tr>
<td>达茂联合旗</td>
<td>达尔罕茂明安联合旗</td>
<td>长白朝鲜族自治县</td>
<td>0.824751</td>
<td>0.287237</td>
<td>3</td>
<td>0</td>
</tr>
<tr>
<td>长阳县</td>
<td>长阳土家族自治县</td>
<td>长白朝鲜族自治县</td>
<td>0.610285</td>
<td>0.475000</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>汩罗市</td>
<td>汨罗市</td>
<td>长白朝鲜族自治县</td>
<td>1.000000</td>
<td>0.152093</td>
<td>4</td>
<td>0</td>
</tr>
</tbody>
</table>
<h2 id="other-use">
  Other use
  <a class="anchor" href="#other-use">#</a>
</h2>
<ul>
<li>
<p>Directly use <code>Stroke</code>, <code>Radical</code> to decompose Chinese character into strokes or radicals.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">stroke <span style="color:#f92672">=</span> Stroke()
radical <span style="color:#f92672">=</span> Radical()
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;像&#34;</span>, stroke<span style="color:#f92672">.</span>get_stroke(<span style="color:#e6db74">&#34;像&#34;</span>))
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;像&#34;</span>, radical<span style="color:#f92672">.</span>get_radical(<span style="color:#e6db74">&#34;像&#34;</span>))
</code></pre></div><pre><code>像 ㇒〡㇒㇇〡㇕一㇒㇁㇒㇒㇒㇏
像 人象
</code></pre></li>
<li>
<p>Use <code>FuzzyChineseMatch.compare_two_columns(X, Y)</code> to compare the pair of words in each row to get similarity score.</p>
</li>
<li>
<p>See <a href="http://znwang.me/fuzzychinese/">documentation</a> for details.</p>
</li>
</ul>
<h2 id="credits">
  Credits
  <a class="anchor" href="#credits">#</a>
</h2>
<p>Data for Chinese radicals are from <a href="https://github.com/kfcd/chaizi">漢語拆字字典</a> by <a href="http://kaifangcidian.com/">開放詞典網</a>.</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#安装说明">安装说明</a></li>
    <li><a href="#使用说明">使用说明</a></li>
    <li><a href="#其他功能">其他功能</a></li>
    <li><a href="#致谢">致谢</a></li>
    <li><a href="#installation">Installation</a></li>
    <li><a href="#quickstart">Quickstart</a></li>
    <li><a href="#other-use">Other use</a></li>
    <li><a href="#credits">Credits</a></li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>

</html>












